# Chapter 08

>  상속과 다형성



## 08 - 1 상속이란?

- 부모(자식에 비해 일반적)와 자식(보다 구체적)의 관계
- `extends` 예약어 사용
- 조심해야 할 오류
  - 상위 클래스에서 private한 변수는 사용 불가능 - protected 예약어를 사용하여 하위 클래스 사용 허락



## 08-2 상속에서 클래스 생성과 형 변환

- 상속을 받은 하위 클래스는 상위 클래스의 변수와 메서드 사용 가능!

  - why❔

    변수를 사용한다 => 그 변수를 위한 메모리가 존재한다.

    하위 클래스가 생성될 때는 상위클래스의 생성자가 먼저 호출

    그 때!!! 상위 클래스의 멤버 변수가 메모리에 생성된다!😮

    (private도 변수가 생성은 되지만 하위 클래스가 접근할 수 없었을 뿐이었다.)

- **super**

  - 상위 클래스의 주소(참조값)를 알 고 있는 예약어
  - 상위 클래스의 생성자를 호출하는 용도에도 사용
  - 매개변수가 있는 생성자 호출도 가능
  - 멤버 변수나 메서드를 참조할 때도 사용 => 상위 클래스와 동일한 이름의 메서드를 구현할 때 조심!

- 모든 하위 클래스 ---(자료형 형변환)--- >> 상위 클래스 (O)

  모든 상위 클래스 ---(자료형 형변환)--- >> 하위 클래스 (X)

- 하위 클래스의 상위 클래스로의 형 변환 과정이 묵시적으로 이루어진다.

  (상속 계층이 여러 단계일 경우도 마찬가지)



## 08-3 메서드 오버라이딩 

- 메서드 재정의 (메서드 오버라이딩)

  - 하위 클래스에서 구현할 내용이 상위 클래스와 맞지 않는 경우

  - 반환형, 메서드 이름, 매개 변수 개수, 매개변수 자료형이 반드시 같아야 한다.

    (그렇게 안하면 다른 메서드로 인식함)

  - `@Override` 애노테이션 => 재정의된 메서드라고 컴파일러에 명확히 알려주는 역할

- 가상 메서드

  - 상위 클래스와 하위 클래스에 같은 이름의 메서드가 존재할 때 호출되는 메서드는 인스턴스에 따라 결정

    => 선언한 클래스형이 아닌 생성된 인스턴스의 메서드를 호출

  - 메서드 기본

    : (메서드는 메서드 영역에 따로 위치하기 때문에 인스턴스가 달라도 동일한 메서드가 호출된다.)

  - 가상 메서드는 '가상 메서드 테이블'이 만들어져 주소 값에 따라 해당 메서드의 명령을 수행하는 방식

    - 즉, 재정의된 메서드는 다른 주소를 참조하고 있는 것이고

      재정의되지 않은 메서드는 같은 주소를 참조하며 그것은 상위 클래스의 메서드 주소이다.



## 08-4 다형성

> 하나의 코드가 여러 자료형으로 구현되어 실행되는 것
>
> 코드에서 여러 실행 결과가 나오는 것

- 코드에는 변화가 없지만 어떤 매개변수가 넘어오느냐에 따라 출력이 달라지는 것.

- 유연하고 구조화된 코드 구현 가능

- 코드의 양이 줄고 유지 보수에 편리

- 모든 클래스를 하나의 상위 클래스로 처리 => 프로그램 확장 so easy~

- 상속 관계에 있는 상위 클래스와 하위 클래스는 같은 상위 클래스 자료형으로 선언되어 생성 가능!

  but. 재정의된 메서드는 각각 호출되고 이름이 같더라도 다른 역할을 할 수 있다!



## 08-5 다형성 활용하기

- `IS-A` 관계 (is a relationship: inheritance)
  - 일반적인 개념과 구체적인 개념의 관계 (ex. 사람은 포유류이다.)
  - 상속은 이러한 관계에서 사용하는 것이 효율적이다.
  - 일반 클래스를 구체화 해나가는 과정!!
  - 하위 클래스가 상위 클래스형에 종속되기 때문에 이질적인 클래스 사이에서는 사용하지 않기
  - 코드의 재사용만 놓고 생각하지 말것!

>  P.S. java에서는 모호성으로 인해 다중 상속을 지원하지 않는다고 한다..😅



## 08-6 다운 캐스팅과 instanceof

- 다운 캐스팅 : 상위 클래스로 형 변환되었던 하위 클래스를 다시 원래 자료형으로 형 반환 하는 것
- instanceof
  - 다운 캐스팅을 하기 전에 상위 클래스로 형 변환된 인스턴스의 원래 자료형을 확인하는 예약어
  - 하위 클래스로 형 변환을 할 때는 명시적으로 해야 하기 때문에 인스턴스형을 확인해줘야 한다.

